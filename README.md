## ëª©ì°¨

- [ëª©ì°¨](#ëª©ì°¨)
- [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ì„¤ê³„](#ì„¤ê³„)
  - [ERD ë‹¤ì´ì–´ê·¸ë¨](#erd-ë‹¤ì´ì–´ê·¸ë¨)
  - [ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨](#ì‹œí€€ìŠ¤-ë‹¤ì´ì–´ê·¸ë¨)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
  - [ë°±ì—”ë“œ API ì„¤ëª…](#ë°±ì—”ë“œ-api-ì„¤ëª…)
- [í”„ë¡œì íŠ¸ ì…‹íŒ… ë°©ë²•](#í”„ë¡œì íŠ¸-ì…‹íŒ…-ë°©ë²•)
  - [í”„ë¡œì íŠ¸ ì´ˆê¸° ì…‹íŒ…](#í”„ë¡œì íŠ¸-ì´ˆê¸°-ì…‹íŒ…)
  - [í”„ë¡œì íŠ¸ ì‹¤í–‰](#í”„ë¡œì íŠ¸-ì‹¤í–‰)
  - [ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰](#ë‹¨ìœ„í…ŒìŠ¤íŠ¸-ì¼€ì´ìŠ¤-ì‹¤í–‰)

---

## í”„ë¡œì íŠ¸ ì†Œê°œ

![na-t-na-intro](./docs/na-t-na-intro.png)

> í”„ë¡œì íŠ¸ ì‹œì—°ì˜ìƒ

![](https://github.com/user-attachments/assets/03562005-99b1-4b57-83d9-137b84915be5)

<br>

> ë°±ì—”ë“œ íŒŒíŠ¸ ì‚¬ìš© ê¸°ìˆ ìŠ¤íƒ

- Language / Framework / Package-Manager: ![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white) ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) ![Yarn](https://img.shields.io/badge/yarn-%232C8EBB.svg?style=for-the-badge&logo=yarn&logoColor=white)
- Web Socket: ![Socket.io](https://img.shields.io/badge/Socket.io-black?style=for-the-badge&logo=socket.io&badgeColor=010101)
- Testing: ![Jest](https://img.shields.io/badge/-jest-%23C21325?style=for-the-badge&logo=jest&logoColor=white)
- RDBMS / NoSQL: ![MySQL](https://img.shields.io/badge/mysql-4479A1.svg?style=for-the-badge&logo=mysql&logoColor=white) ![Redis](https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white)
- Cloud: ![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)
- EC2, ALB(Application Load Balancer), Route53, ACM, S3, VPC
- CI/CD: ![GitHub Actions](https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white) ![PM2](https://img.shields.io/badge/PM2-%232B037A?style=for-the-badge&logo=PM2&logoColor=white)

---

## ì„¤ê³„

### ERD ë‹¤ì´ì–´ê·¸ë¨

![domain-relations](./docs/domain-relations.png)

- [dbdiagram link - Na-T-Na ERD](https://dbdiagram.io/d/na-T-na-BE-ERD-688b84b6cca18e685caf46b2)

![na-t-na-erd](./docs/na-T-na-BE-ERD.png)

### ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

- 7ê°œì˜ ë„ë©”ì¸ì„ ì£¼ì¶•ìœ¼ë¡œ ëª¨ë“ˆìƒì„±
  ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì´ë£¨ëŠ” ë„ë©”ì¸ì€ `Chatbot`, `Chatroom`, `Message`, `Quiz`, `External-API`,`Quiz`, `User` ìœ¼ë¡œ ê° 7ê°œëŠ” ë…ë¦½ì ì¸ ëª¨ë“ˆê³¼ í”„ë¡œë°”ì´ë”ë¡œ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.

- í´ë¦°ì•„í‚¤í…ì³ì™€ ë ˆì´ì–´ë“œì•„í‚¤í…ì³ì„ ëª¨ë¸ë¡œ í”„ë¡œì íŠ¸ì˜ ê° ë„ë©”ì¸ë³„ ê³„ì¸µì„ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
- ê° ë„ë©”ì¸ì—ëŠ” `domain`, `presentation`, `infrastructure` 3ê°œì˜ ê³„ì¸µì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤.
  - `domain`
    - í•´ë‹¹ ë„ë©”ì¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ë£°ê³¼ í•µì‹¬ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
    - ì„œë¹„ìŠ¤ë¡œì§, ë¹„ì¦ˆë‹ˆìŠ¤ê·œì¹™, ë˜í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤, ì„œë¹„ìŠ¤ unit-test ë¡œ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.
  - `presentation`
    - ì»¨íŠ¸ë¡¤ëŸ¬(REST API), ê²Œì´íŠ¸ì›¨ì´(Web-Socket) ë“± ì— í•´ë‹¹ë˜ë©°, APIìš”ì²­í• ë•Œ ë¨¼ì € ì ‘ê·¼ë˜ëŠ” í”„ë ˆì  í…Œì´ì…˜ ë° ì´ë²¤íŠ¸/URL ë¼ìš°íŒ… ê³„ì¸µì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
  - `infrastructure`
    - ë„ë©”ì¸ê³„ì¸µì—ì„œëŠ” ë˜í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ì´ë©°, ì¸í„°í˜ì´ìŠ¤ì˜ ì‹¤ì œ êµ¬í˜„ì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê²°ëœ ORMì„ ì´ìš©í•˜ì—¬ queryì— ì•Œë§ëŠ” ë¦¬ìŠ¤í°ìŠ¤ë¥¼ ì‘ë‹µí•©ë‹ˆë‹¤.

```bash
chatbots
â”œâ”€Â chatbots.module.ts
â”œâ”€Â domain
â”‚Â Â â”œâ”€Â chatbot-with-personalities.type.ts
â”‚Â Â â”œâ”€Â chatbot.policy.ts
â”‚Â Â â”œâ”€Â chatbot.repository.interface.ts
â”‚Â Â â”œâ”€Â chatbots.service.test.ts
â”‚Â Â â””â”€Â chatbots.service.ts
â”œâ”€Â infrastructure
â”‚Â Â â””â”€Â chatbot.repository.ts
â””â”€Â presentation
 Â Â â”œâ”€Â chatbots.controller.ts
Â Â Â â””â”€Â dto
Â Â Â Â Â Â Â Â â””â”€Â get-chatbots.response.dto.ts
```

- ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°

```bash
ğŸ“¦
â”œâ”€Â .dockerignore
â”œâ”€Â .env.test
â”œâ”€Â .github
â”‚Â Â â””â”€Â workflows
â”‚Â Â Â Â Â â”œâ”€Â deploy-production.yml
â”‚Â Â Â Â Â â””â”€Â test.yml
â”œâ”€Â .gitignore
â”œâ”€Â .prettierrc
â”œâ”€Â .vscode
â”‚Â Â â””â”€Â launch.json
â”œâ”€Â Dockerfile
â”œâ”€Â README.md
â”œâ”€Â docker-compose.yml
â”œâ”€Â eslint.config.mjs
â”œâ”€Â jest.config.json
â”œâ”€Â nest-cli.json
â”œâ”€Â package.json
â”œâ”€Â prisma
â”‚Â Â â”œâ”€Â first-chatbot-seeds.ts
â”‚Â Â â””â”€Â schema.prisma
â”œâ”€Â src
â”‚Â Â â”œâ”€Â app.controller.spec.ts
â”‚Â Â â”œâ”€Â app.controller.ts
â”‚Â Â â”œâ”€Â app.module.ts
â”‚Â Â â”œâ”€Â app.service.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â chatbots
â”‚Â Â â”‚Â Â â”œâ”€Â chatbots.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â domain
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatbot-with-personalities.type.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatbot.policy.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatbot.repository.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatbots.service.test.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â chatbots.service.ts
â”‚Â Â â”‚Â Â â”œâ”€Â infrastructure
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â chatbot.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â presentation
â”‚Â Â â”‚Â Â Â Â Â â”œâ”€Â chatbots.controller.ts
â”‚Â Â â”‚Â Â Â Â Â â””â”€Â dto
â”‚Â Â â”‚Â Â Â Â Â Â Â Â â””â”€Â get-chatbots.response.dto.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â chatrooms
â”‚Â Â â”‚Â Â â”œâ”€Â chatrooms.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â domain
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatroom-feedback-buisness-rule.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatroom.repository.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatrooms.service.spec.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatrooms.service.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â chatting-socket-business-rule.ts
â”‚Â Â â”‚Â Â â”œâ”€Â infrastructure
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â chatroom.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â presentation
â”‚Â Â â”‚Â Â Â Â Â â”œâ”€Â chatrooms.controller.ts
â”‚Â Â â”‚Â Â Â Â Â â”œâ”€Â chatrooms.gateway.ts
â”‚Â Â â”‚Â Â Â Â Â â””â”€Â dto
â”‚Â Â â”‚Â Â Â Â Â Â Â Â â”œâ”€Â answer.dto.ts
â”‚Â Â â”‚Â Â Â Â Â Â Â Â â”œâ”€Â get-last-letter.dto.ts
â”‚Â Â â”‚Â Â Â Â Â Â Â Â â””â”€Â join-room.dto.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â common
â”‚Â Â â”‚Â Â â”œâ”€Â S3_URL.ts
â”‚Â Â â”‚Â Â â”œâ”€Â common.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â custom-exceptions
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â base-custom-exception.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â policy-errors.ts
â”‚Â Â â”‚Â Â â”œâ”€Â global-exception.filter.ts
â”‚Â Â â”‚Â Â â”œâ”€Â swagger-mock-api.service.ts
â”‚Â Â â”‚Â Â â”œâ”€Â swagger-mock.interceptor.spec.ts
â”‚Â Â â”‚Â Â â””â”€Â swagger-mock.interceptor.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â external-api
â”‚Â Â â”‚Â Â â”œâ”€Â dto
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â request-chatbot-reaction-from-conversation.dto.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â request-create-situation.dto.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â request-feedback.dto.ts
â”‚Â Â â”‚Â Â â”œâ”€Â external-api.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â external-api.service.spec.ts
â”‚Â Â â”‚Â Â â””â”€Â external-api.service.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â main.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â messages
â”‚Â Â â”‚Â Â â”œâ”€Â domain
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message-business-rule.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message.cache-store.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message.repository.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message.type.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â messages.service.spec.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â messages.service.ts
â”‚Â Â â”‚Â Â â”œâ”€Â infrastructure
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message.cache-store.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â message.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â messages.module.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â prisma
â”‚Â Â â”‚Â Â â”œâ”€Â prisma.module.ts
â”‚Â Â â”‚Â Â â””â”€Â prisma.service.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â quizes
â”‚Â Â â”‚Â Â â”œâ”€Â domain
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â dto
â”‚Â Â â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â update-quiz.dto.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quiz-list.type.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quiz.cache-store.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quiz.repository.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quizes.service.spec.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â quizes.service.ts
â”‚Â Â â”‚Â Â â”œâ”€Â infrastructure
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quiz.cache-store.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â quiz.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â quizes.module.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â redis
â”‚Â Â â”‚Â Â â”œâ”€Â redis.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â redis.service-integration.test.ts
â”‚Â Â â”‚Â Â â”œâ”€Â redis.service.interface.ts
â”‚Â Â â”‚Â Â â””â”€Â redis.service.ts
â”‚Â Â â”‚
â”‚Â Â â””â”€Â users
â”‚Â Â Â Â Â â”œâ”€Â domain
â”‚Â Â Â Â Â â”‚Â Â â”œâ”€Â create-user.dto.ts
â”‚Â Â Â Â Â â”‚Â Â â”œâ”€Â user.policy.ts
â”‚Â Â Â Â Â â”‚Â Â â”œâ”€Â user.repository.interface.ts
â”‚Â Â Â Â Â â”‚Â Â â”œâ”€Â users.service.spec.ts
â”‚Â Â Â Â Â â”‚Â Â â””â”€Â users.service.ts
â”‚Â Â Â Â Â â”œâ”€Â infrastructure
â”‚Â Â Â Â Â â”‚Â Â â””â”€Â user.repository.ts
â”‚Â Â Â Â Â â”œâ”€Â presentation
â”‚Â Â Â Â Â â”‚Â Â â””â”€Â users.controller.ts
â”‚Â Â Â Â Â â””â”€Â users.module.ts
â”œâ”€Â test
â”‚Â Â â””â”€Â jest-e2e.json
â”œâ”€Â tsconfig.build.json
â”œâ”€Â tsconfig.json
â””â”€Â yarn.lock

```

### ë°±ì—”ë“œ API ì„¤ëª…

---

## í”„ë¡œì íŠ¸ ì…‹íŒ… ë°©ë²•

### í”„ë¡œì íŠ¸ ì´ˆê¸° ì…‹íŒ…

- Mysql8.0, Reids ë¨¼ì € ì„¤ì¹˜ ê¶Œì¥
- ë„ì»¤ì‹¤í–‰ì„ í•˜ê²Œë˜ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ë¡œì»¬í™˜ê²½ ë„ì»¤ ì…‹íŒ…ì„ í•œë‹¤.

```bash
docker-compose up -d
```

- í”„ë¡œì íŠ¸ ì‚¬ìš© íŒ¨í‚¤ì§€ ì¸ìŠ¤í†¨

```bash
yarn install
```

- ì—°ê²°ëœ ë°ì´í„°ë² ì´ìŠ¤ì— prisma ORM ë°˜ì˜í•˜ê¸°

```bash
npx prisma generate
npx prisma db push
```

- ì´ˆê¸° ì±—ë´‡(íˆ¬ë‹¥ì´) ë°ì´í„° ì´ˆê¸°ì…‹íŒ…

```bash
npx prisma db seed
```

### í”„ë¡œì íŠ¸ ì‹¤í–‰

```bash
# ì¼ë°˜ ì‹¤í–‰
$ yarn run start

# ê°œë°œëª¨ë“œ
$ yarn run start:dev

```

### ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰

```bash
# unit tests
$ yarn run test

```
