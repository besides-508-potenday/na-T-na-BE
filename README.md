## ëª©ì°¨

- [ëª©ì°¨](#ëª©ì°¨)
- [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ERD ë‹¤ì´ì–´ê·¸ë¨](#erd-ë‹¤ì´ì–´ê·¸ë¨)
- [ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨](#ì‹œí€€ìŠ¤-ë‹¤ì´ì–´ê·¸ë¨)
  - [ì±„íŒ…ë°© ì…ì¥ í”„ë¡œì„¸ìŠ¤](#ì±„íŒ…ë°©-ì…ì¥-í”„ë¡œì„¸ìŠ¤)
  - [ì±—ë´‡ ì§ˆë¬¸ì— ëŒ€í•œ ì‚¬ìš©ì ì‘ë‹µ í”„ë¡œì„¸ìŠ¤](#ì±—ë´‡-ì§ˆë¬¸ì—-ëŒ€í•œ-ì‚¬ìš©ì-ì‘ë‹µ-í”„ë¡œì„¸ìŠ¤)
  - [ì±—ë´‡ ì§ˆë¬¸ì— ëŒ€í•œ ì‚¬ìš©ì ì‘ë‹µë©”ì‹œì§€ ì •ì±…ìœ„ë°˜ í”„ë¡œì„¸ìŠ¤](#ì±—ë´‡-ì§ˆë¬¸ì—-ëŒ€í•œ-ì‚¬ìš©ì-ì‘ë‹µë©”ì‹œì§€-ì •ì±…ìœ„ë°˜-í”„ë¡œì„¸ìŠ¤)
  - [ì±—ë´‡ì˜ ë§ˆì§€ë§‰í¸ì§€](#ì±—ë´‡ì˜-ë§ˆì§€ë§‰í¸ì§€)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
  - [ì „ì²´ í”„ë¡œì íŠ¸ íŒŒì¼ êµ¬ì¡°](#ì „ì²´-í”„ë¡œì íŠ¸-íŒŒì¼-êµ¬ì¡°)
- [REST API ì •ì˜ì„œ](#rest-api-ì •ì˜ì„œ)
  - [ì±—ë´‡ëª©ë¡ ì¡°íšŒ](#ì±—ë´‡ëª©ë¡-ì¡°íšŒ)
  - [ì±—ë´‡ ë§ˆì§€ë§‰ í¸ì§€ ì¡°íšŒ](#ì±—ë´‡-ë§ˆì§€ë§‰-í¸ì§€-ì¡°íšŒ)
- [Websocket ì´ë²¤íŠ¸ì— ëŒ€í•œ ì‘ë‹µ](#websocket-ì´ë²¤íŠ¸ì—-ëŒ€í•œ-ì‘ë‹µ)
- [í”„ë¡œì íŠ¸ ì…‹íŒ… ë°©ë²•](#í”„ë¡œì íŠ¸-ì…‹íŒ…-ë°©ë²•)
  - [í”„ë¡œì íŠ¸ ì´ˆê¸° ì…‹íŒ…](#í”„ë¡œì íŠ¸-ì´ˆê¸°-ì…‹íŒ…)
  - [í”„ë¡œì íŠ¸ ì‹¤í–‰](#í”„ë¡œì íŠ¸-ì‹¤í–‰)
  - [ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰](#ë‹¨ìœ„í…ŒìŠ¤íŠ¸-ì¼€ì´ìŠ¤-ì‹¤í–‰)

---

## í”„ë¡œì íŠ¸ ì†Œê°œ

![na-t-na-intro](./docs/na-t-na-intro.png)

> í”„ë¡œì íŠ¸ ì‹œì—°ì˜ìƒ

<https://github.com/user-attachments/assets/d3375fd6-f3cd-4e8f-a110-ff36fb10ef76>

<br>

> ë°±ì—”ë“œ íŒŒíŠ¸ ì‚¬ìš© ê¸°ìˆ ìŠ¤íƒ

- Language / Framework / Package-Manager: ![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white) ![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white) ![Yarn](https://img.shields.io/badge/yarn-%232C8EBB.svg?style=for-the-badge&logo=yarn&logoColor=white)
- Web Socket: ![Socket.io](https://img.shields.io/badge/Socket.io-black?style=for-the-badge&logo=socket.io&badgeColor=010101)
- Testing: ![Jest](https://img.shields.io/badge/-jest-%23C21325?style=for-the-badge&logo=jest&logoColor=white)
- RDBMS / NoSQL: ![MySQL](https://img.shields.io/badge/mysql-4479A1.svg?style=for-the-badge&logo=mysql&logoColor=white) ![Redis](https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white)
- Cloud: ![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)
- EC2, ALB(Application Load Balancer), Route53, ACM, S3, VPC
- CI/CD: ![GitHub Actions](https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white) ![PM2](https://img.shields.io/badge/PM2-%232B037A?style=for-the-badge&logo=PM2&logoColor=white)

---

## ERD ë‹¤ì´ì–´ê·¸ë¨

![domain-relations](./docs/domain-relations.png)

- [dbdiagram link - Na-T-Na ERD](https://dbdiagram.io/d/na-T-na-BE-ERD-688b84b6cca18e685caf46b2)

![na-t-na-erd](./docs/na-T-na-BE-ERD.png)

<br>

---

## ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

### ì±„íŒ…ë°© ì…ì¥ í”„ë¡œì„¸ìŠ¤

![sequence-join-room](./docs/sequence-join-room.png)

<br><br>

### ì±—ë´‡ ì§ˆë¬¸ì— ëŒ€í•œ ì‚¬ìš©ì ì‘ë‹µ í”„ë¡œì„¸ìŠ¤

> ì²«ë²ˆì§¸ ì§ˆë¬¸(quiz)ì— ëŒ€í•œ ì‚¬ìš©ì ë‹µë³€ê³¼ ì±—ë´‡ ë¦¬ì•¡ì…˜ ì§„í–‰ í”„ë¡œì„¸ìŠ¤

![sequence-conversation-01](./docs/sequence-conversation-01.png)

<br>

> ë§ˆì§€ë§‰ ì§ˆë¬¸(5ë²ˆì§¸ ì§ˆë¬¸)ì— ëŒ€í•œ ì‚¬ìš©ì ë‹µë³€ê³¼ ì±—ë´‡ ë¦¬ì•¡ì…˜ ì§„í–‰ í”„ë¡œì„¸ìŠ¤

![sequence-conversation-02](./docs/sequence-conversation-02.png)

<br><br>

### ì±—ë´‡ ì§ˆë¬¸ì— ëŒ€í•œ ì‚¬ìš©ì ì‘ë‹µë©”ì‹œì§€ ì •ì±…ìœ„ë°˜ í”„ë¡œì„¸ìŠ¤

> ì‚¬ìš©ìì˜ ë‹µë³€ì—ì„œ ë¶€ì ì ˆí•œ íŠ¹ì • í‚¤ì›Œë“œ(ì˜ˆ: 'ìì‚´', 'í…ŒëŸ¬', 'ìš°ìš¸' ë“±) ê°€ í¬í•¨í•œ ê²½ìš°

![sequence-invalid-01](./docs/sequence-invalid-01.png)

> ì‚¬ìš©ìì˜ ë‹µë³€ì—ì„œ ë¹„ì†ì–´, ìš•ì„¤ ê³¼ ê°™ì€ ë¶ˆì¾Œê° ìœ ë°œ ë° ë¶€ì ì ˆí•œ ë¬¸ë§¥íë¦„ ê°ì§€í•˜ê±°ë‚˜ í”„ë¡¬í”„íŠ¸ íƒˆì·¨ í•  ê²½ìš°

![sequence-invalid-02](./docs/sequence-invalid-02.png)

<br><br>

### ì±—ë´‡ì˜ ë§ˆì§€ë§‰í¸ì§€

> ì±„íŒ… ì¢…ë£Œ í›„, ì±—ë´‡ì˜ ë§ˆì§€ë§‰í¸ì§€ë¥¼ ìš”ì²­í•´ì•¼í•˜ëŠ” ê²½ìš° (`is_finished = false`)

![sequence-feedback-01.png](./docs/sequence-feedback-01.png)

<br>

> ì´ë¯¸ ì±—ë´‡ì˜ ë§ˆì§€ë§‰í¸ì§€ë¥¼ ë°›ì€ ê²½ìš° (`is_finished = true` )

![sequence-feedback-02.png](./docs/sequence-feedback-02.png)

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

- 7ê°œì˜ ë„ë©”ì¸ì„ ì£¼ì¶•ìœ¼ë¡œ ëª¨ë“ˆìƒì„±
  ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì´ë£¨ëŠ” ë„ë©”ì¸ì€ `Chatbot`, `Chatroom`, `Message`, `Quiz`,`Quiz`, `User` ìœ¼ë¡œ ê° 6ê°œëŠ” ë…ë¦½ì ì¸ ëª¨ë“ˆê³¼ í”„ë¡œë°”ì´ë”ë¡œ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.

- í´ë¦°ì•„í‚¤í…ì³ì™€ ë ˆì´ì–´ë“œì•„í‚¤í…ì³ì„ ëª¨ë¸ë¡œ í”„ë¡œì íŠ¸ì˜ ê° ë„ë©”ì¸ë³„ ê³„ì¸µì„ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
- ê° ë„ë©”ì¸ì—ëŠ” `domain`, `presentation`, `infrastructure` 3ê°œì˜ ê³„ì¸µì„ ê°–ê³ ìˆìŠµë‹ˆë‹¤.
  - `domain`
    - í•´ë‹¹ ë„ë©”ì¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ë£°ê³¼ í•µì‹¬ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
    - ì„œë¹„ìŠ¤ë¡œì§, ë¹„ì¦ˆë‹ˆìŠ¤ê·œì¹™, ë˜í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤, ì„œë¹„ìŠ¤ unit-test ë¡œ êµ¬ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.
  - `presentation`
    - ì»¨íŠ¸ë¡¤ëŸ¬(REST API), ê²Œì´íŠ¸ì›¨ì´(Web-Socket) ë“± ì— í•´ë‹¹ë˜ë©°, APIìš”ì²­í• ë•Œ ë¨¼ì € ì ‘ê·¼ë˜ëŠ” í”„ë ˆì  í…Œì´ì…˜ ë° ì´ë²¤íŠ¸/URL ë¼ìš°íŒ… ê³„ì¸µì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
  - `infrastructure`
    - ë„ë©”ì¸ê³„ì¸µì—ì„œëŠ” ë˜í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ì´ë©°, ì¸í„°í˜ì´ìŠ¤ì˜ ì‹¤ì œ êµ¬í˜„ì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê²°ëœ ORMì„ ì´ìš©í•˜ì—¬ queryì— ì•Œë§ëŠ” ë¦¬ìŠ¤í°ìŠ¤ë¥¼ ì‘ë‹µí•©ë‹ˆë‹¤.

```bash
chatbots
â”œâ”€Â chatbots.module.ts
â”œâ”€Â domain
â”‚Â Â â”œâ”€Â chatbot-with-personalities.type.ts
â”‚Â Â â”œâ”€Â chatbot.policy.ts
â”‚Â Â â”œâ”€Â chatbot.repository.interface.ts
â”‚Â Â â”œâ”€Â chatbots.service.test.ts
â”‚Â Â â””â”€Â chatbots.service.ts
â”œâ”€Â infrastructure
â”‚Â Â â””â”€Â chatbot.repository.ts
â””â”€Â presentation
 Â Â â”œâ”€Â chatbots.controller.ts
Â Â Â â””â”€Â dto
Â Â Â Â Â Â Â Â â””â”€Â get-chatbots.response.dto.ts
```

### ì „ì²´ í”„ë¡œì íŠ¸ íŒŒì¼ êµ¬ì¡°

```bash
ğŸ“¦
â”œâ”€Â .dockerignore
â”œâ”€Â .env.test
â”œâ”€Â .github
â”‚Â Â â””â”€Â workflows
â”‚Â Â Â Â Â â”œâ”€Â deploy-production.yml
â”‚Â Â Â Â Â â””â”€Â test.yml
â”œâ”€Â .gitignore
â”œâ”€Â .prettierrc
â”œâ”€Â .vscode
â”‚Â Â â””â”€Â launch.json
â”œâ”€Â Dockerfile
â”œâ”€Â README.md
â”œâ”€Â docker-compose.yml
â”œâ”€Â eslint.config.mjs
â”œâ”€Â jest.config.json
â”œâ”€Â nest-cli.json
â”œâ”€Â package.json
â”œâ”€Â prisma
â”‚Â Â â”œâ”€Â first-chatbot-seeds.ts
â”‚Â Â â””â”€Â schema.prisma
â”œâ”€Â src
â”‚Â Â â”œâ”€Â app.controller.spec.ts
â”‚Â Â â”œâ”€Â app.controller.ts
â”‚Â Â â”œâ”€Â app.module.ts
â”‚Â Â â”œâ”€Â app.service.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â chatbots
â”‚Â Â â”‚Â Â â”œâ”€Â chatbots.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â domain
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatbot-with-personalities.type.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatbot.policy.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatbot.repository.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatbots.service.test.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â chatbots.service.ts
â”‚Â Â â”‚Â Â â”œâ”€Â infrastructure
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â chatbot.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â presentation
â”‚Â Â â”‚Â Â Â Â Â â”œâ”€Â chatbots.controller.ts
â”‚Â Â â”‚Â Â Â Â Â â””â”€Â dto
â”‚Â Â â”‚Â Â Â Â Â Â Â Â â””â”€Â get-chatbots.response.dto.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â chatrooms
â”‚Â Â â”‚Â Â â”œâ”€Â chatrooms.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â domain
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatroom-feedback-buisness-rule.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatroom.repository.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatrooms.service.spec.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â chatrooms.service.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â chatting-socket-business-rule.ts
â”‚Â Â â”‚Â Â â”œâ”€Â infrastructure
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â chatroom.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â presentation
â”‚Â Â â”‚Â Â Â Â Â â”œâ”€Â chatrooms.controller.ts
â”‚Â Â â”‚Â Â Â Â Â â”œâ”€Â chatrooms.gateway.ts
â”‚Â Â â”‚Â Â Â Â Â â””â”€Â dto
â”‚Â Â â”‚Â Â Â Â Â Â Â Â â”œâ”€Â answer.dto.ts
â”‚Â Â â”‚Â Â Â Â Â Â Â Â â”œâ”€Â get-last-letter.dto.ts
â”‚Â Â â”‚Â Â Â Â Â Â Â Â â””â”€Â join-room.dto.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â common
â”‚Â Â â”‚Â Â â”œâ”€Â S3_URL.ts
â”‚Â Â â”‚Â Â â”œâ”€Â common.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â custom-exceptions
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â base-custom-exception.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â policy-errors.ts
â”‚Â Â â”‚Â Â â”œâ”€Â global-exception.filter.ts
â”‚Â Â â”‚Â Â â”œâ”€Â swagger-mock-api.service.ts
â”‚Â Â â”‚Â Â â”œâ”€Â swagger-mock.interceptor.spec.ts
â”‚Â Â â”‚Â Â â””â”€Â swagger-mock.interceptor.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â external-api
â”‚Â Â â”‚Â Â â”œâ”€Â dto
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â request-chatbot-reaction-from-conversation.dto.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â request-create-situation.dto.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â request-feedback.dto.ts
â”‚Â Â â”‚Â Â â”œâ”€Â external-api.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â external-api.service.spec.ts
â”‚Â Â â”‚Â Â â””â”€Â external-api.service.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â main.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â messages
â”‚Â Â â”‚Â Â â”œâ”€Â domain
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message-business-rule.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message.cache-store.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message.repository.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message.type.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â messages.service.spec.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â messages.service.ts
â”‚Â Â â”‚Â Â â”œâ”€Â infrastructure
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â message.cache-store.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â message.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â messages.module.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â prisma
â”‚Â Â â”‚Â Â â”œâ”€Â prisma.module.ts
â”‚Â Â â”‚Â Â â””â”€Â prisma.service.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â quizes
â”‚Â Â â”‚Â Â â”œâ”€Â domain
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â dto
â”‚Â Â â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â update-quiz.dto.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quiz-list.type.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quiz.cache-store.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quiz.repository.interface.ts
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quizes.service.spec.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â quizes.service.ts
â”‚Â Â â”‚Â Â â”œâ”€Â infrastructure
â”‚Â Â â”‚Â Â â”‚Â Â â”œâ”€Â quiz.cache-store.ts
â”‚Â Â â”‚Â Â â”‚Â Â â””â”€Â quiz.repository.ts
â”‚Â Â â”‚Â Â â””â”€Â quizes.module.ts
â”‚Â Â â”‚
â”‚Â Â â”œâ”€Â redis
â”‚Â Â â”‚Â Â â”œâ”€Â redis.module.ts
â”‚Â Â â”‚Â Â â”œâ”€Â redis.service-integration.test.ts
â”‚Â Â â”‚Â Â â”œâ”€Â redis.service.interface.ts
â”‚Â Â â”‚Â Â â””â”€Â redis.service.ts
â”‚Â Â â”‚
â”‚Â Â â””â”€Â users
â”‚Â Â Â Â Â â”œâ”€Â domain
â”‚Â Â Â Â Â â”‚Â Â â”œâ”€Â create-user.dto.ts
â”‚Â Â Â Â Â â”‚Â Â â”œâ”€Â user.policy.ts
â”‚Â Â Â Â Â â”‚Â Â â”œâ”€Â user.repository.interface.ts
â”‚Â Â Â Â Â â”‚Â Â â”œâ”€Â users.service.spec.ts
â”‚Â Â Â Â Â â”‚Â Â â””â”€Â users.service.ts
â”‚Â Â Â Â Â â”œâ”€Â infrastructure
â”‚Â Â Â Â Â â”‚Â Â â””â”€Â user.repository.ts
â”‚Â Â Â Â Â â”œâ”€Â presentation
â”‚Â Â Â Â Â â”‚Â Â â””â”€Â users.controller.ts
â”‚Â Â Â Â Â â””â”€Â users.module.ts
â”œâ”€Â test
â”‚Â Â â””â”€Â jest-e2e.json
â”œâ”€Â tsconfig.build.json
â”œâ”€Â tsconfig.json
â””â”€Â yarn.lock

```

---

## REST API ì •ì˜ì„œ

### ì±—ë´‡ëª©ë¡ ì¡°íšŒ

| Method | URL             | ëª©ì           |
| ------ | --------------- | ------------- |
| GET    | `/api/chatbots` | ì±—ë´‡ëª©ë¡ ì¡°íšŒ |

> ì˜ˆì‹œ ì‘ë‹µë°ì´í„°

```json
{
  "chatbots": [
    {
      "chatbot_id": 1,
      "chatbot_profile_image": "{S3-URL}/chatbots/1/profile.png",
      "chatbot_name": "íˆ¬ë‹¥ì´",
      "chatbot_personalities": "ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ì— ê°ì • 200% ëª°ì…",
      "chatbot_speciality": "ê³µê° ìŠ¤í‚¬ í–¥ìƒì„ ìœ„í•œ ì¡°ë ¥ ë©”ì´íŠ¸",
      "is_unknown": false
    },
    {
      "chatbot_id": 2,
      "chatbot_profile_image": "{S3-URL}/chatbots/2/unknown.png",
      "chatbot_name": "ì¸ê³ ìˆ˜_???",
      "chatbot_personalities": "???",
      "chatbot_speciality": "ì—°ì•  ê³µê° ì‹œë®¬ë ˆì´ì…˜",
      "is_unknown": true
    }
  ]
}
```

### ì±—ë´‡ ë§ˆì§€ë§‰ í¸ì§€ ì¡°íšŒ

| Method | URL                                                                     | ëª©ì                    |
| ------ | ----------------------------------------------------------------------- | ---------------------- |
| GET    | `/api/chatrooms/{chatroom_id}/letters`<br />- chatroom_id: uuid(string) | ì±—ë´‡ì˜ ë§ˆì§€ë§‰í¸ì§€ ì¡°íšŒ |

> ì˜ˆì‹œ ì‘ë‹µ ë°ì´í„°

```json
{
  "chatroom_id": "{uuid}",
  "is_finished": true,
  "current_distance": 10,
  "letter": "{íˆ¬ë‹¥ì´ê°€ ë³´ë‚´ëŠ” í¸ì§€ ë‚´ìš©}",
  "user_nickname": "ì‚¬ìš©ì ë‹‰ë„¤ì„",
  "chatbot_name": "íˆ¬ë‹¥ì´",
  "chatbot_id": 1,
  "from_chatbot": "í˜ë“¤ì—ˆë˜ í•˜ë£¨ ëì—, \n íˆ¬ë‹¥ì´"
  "letter_mp3": "{S3-URL}/chatrooms/results/{chatroom_id}/letter_voice.mp3",
  "chatbot_result_image": "{S3-URL}/chatbots/{chatbot_id}/results/result_0.png"
}
```

<br>

> ì„¤ëª…

| í•„ë“œëª…               | ë°ì´í„° íƒ€ì…  | ì •ì˜                                                          |
| -------------------- | ------------ | ------------------------------------------------------------- |
| chatroom_id          | string(uuid) | ì±„íŒ…ë°© PK                                                     |
| is_finished          | boolean      | í¸ì§€ì§€ì‘ì„± ì™„ë£Œ ì—¬ë¶€ - ì‘ì„±ì™„ë£Œ: true - ë¯¸ì™„ì„±(ì±„íŒ…ì¤‘): false |
| current_distance     | int          | ì±—ë´‡ê³¼ì˜ ì‚¬ì´ê±°ë¦¬                                             |
| letter               | string       | ë§ˆì§€ë§‰ í¸ì§€ ë‚´ìš©                                              |
| user_nickname        | string       | ì‚¬ìš©ì ë‹‰ë„¤ì„                                                 |
| chatbot_id           | int          | ì±—ë´‡ PK                                                       |
| chatbot_name         | string       | ì±—ë´‡ ì´ë¦„                                                     |
| letter_mp3           | string(url)  | ë§ˆì§€ë§‰ í¸ì§€ ë‚´ìš© ìŒì„±íŒŒì¼ url                                 |
| chatbot_result_image | string(url)  | ë§ˆì§€ë§‰ í¸ì§€ ê²°ê³¼ ì´ë¯¸ì§€ url                                   |
| from_chatbot         | string       | {AIì‘ì„± ë§ˆì§€ë§‰ ì•ˆë¶€ì¸ì‚¬},{ì±—ë´‡ëª…}                             |

<br>

> ì±—ë´‡ ê²°ê³¼ì´ë¯¸ì§€ íŒŒì¼(chatbot_result_image) ì¡°ê±´

| í•˜íŠ¸ê°œìˆ˜<br />heart_life | ì±—ë´‡ê³¼ì˜ ê±°ë¦¬<br />(current_distance) | ì±—ë´‡ê²°ê³¼ ì´ë¯¸ì§€íŒŒì¼<br />chatbot_result_image | ì„¤ëª…                          |
| :----------------------: | ------------------------------------- | --------------------------------------------- | ----------------------------- |
|            0             | 5                                     | result_0.png                                  | ì±—ë´‡ê³¼ ì‚¬ì´ê±°ë¦¬ê°€ ê°€ì¥ ë©€ë‹¤   |
|            1             | 4                                     | result_1.png                                  |                               |
|           2~3            | 3~2                                   | result_2.png                                  |                               |
|            4             | 1                                     | result_3.png                                  |                               |
|            5             | 0                                     | result_4.png                                  | ì±—ë´‡ê³¼ ì‚¬ì´ê±°ë¦¬ê°€ ê°€ì¥ ê°€ê¹ë‹¤ |

---

## Websocket ì´ë²¤íŠ¸ì— ëŒ€í•œ ì‘ë‹µ

(tbd)

---

## í”„ë¡œì íŠ¸ ì…‹íŒ… ë°©ë²•

### í”„ë¡œì íŠ¸ ì´ˆê¸° ì…‹íŒ…

- Mysql8.0, Reids ë¨¼ì € ì„¤ì¹˜ ê¶Œì¥
- ë„ì»¤ì‹¤í–‰ì„ í•˜ê²Œë˜ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ë¡œì»¬í™˜ê²½ ë„ì»¤ ì…‹íŒ…ì„ í•œë‹¤.

```bash
docker-compose up -d
```

- í”„ë¡œì íŠ¸ ì‚¬ìš© íŒ¨í‚¤ì§€ ì¸ìŠ¤í†¨

```bash
yarn install
```

- ì—°ê²°ëœ ë°ì´í„°ë² ì´ìŠ¤ì— prisma ORM ë°˜ì˜í•˜ê¸°

```bash
npx prisma generate
npx prisma db push
```

- ì´ˆê¸° ì±—ë´‡(íˆ¬ë‹¥ì´) ë°ì´í„° ì´ˆê¸°ì…‹íŒ…

```bash
npx prisma db seed
```

### í”„ë¡œì íŠ¸ ì‹¤í–‰

```bash
# ì¼ë°˜ ì‹¤í–‰
$ yarn run start

# ê°œë°œëª¨ë“œ
$ yarn run start:dev

```

### ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰

```bash
# unit tests
$ yarn run test

```
